<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NEORV32 Software Framework Documentation: sw/example/demo_dual_core_rte/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="neorv32_logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">NEORV32 Software Framework Documentation
   </div>
   <div id="projectbrief">The NEORV32 RISC-V Processor</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_f0f9b27afba2e8cc2da6e5fddcc1a8c9.html">example</a></li><li class="navelem"><a class="el" href="dir_351481e2421b504d5590a21c418affa3.html">demo_dual_core_rte</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>SMP dual-core program to show how to use the RTE on two cores. This example runs the same code on both cores and triggers the timer and software interrupts to showcase dual-core trap handling using the NEORV32 runtime environment (RTE).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="neorv32_8h_source.html">neorv32.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="demo__dual__core__rte_2spinlock_8h_source.html">spinlock.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad4455691936f92fdd6c37566fc58ba1f" id="r_ad4455691936f92fdd6c37566fc58ba1f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4455691936f92fdd6c37566fc58ba1f">BAUD_RATE</a>&#160;&#160;&#160;19200</td></tr>
<tr class="separator:ad4455691936f92fdd6c37566fc58ba1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afe6cfafd50efbb383d651961fe231d52" id="r_afe6cfafd50efbb383d651961fe231d52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe6cfafd50efbb383d651961fe231d52">trap_handler_mtmi</a> (void)</td></tr>
<tr class="separator:afe6cfafd50efbb383d651961fe231d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c6d41971ccbb69a9aee65e04d888477" id="r_a0c6d41971ccbb69a9aee65e04d888477"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c6d41971ccbb69a9aee65e04d888477">trap_handler_mswi</a> (void)</td></tr>
<tr class="separator:a0c6d41971ccbb69a9aee65e04d888477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9db87e800d9daff345b46eb0b184b8f7" id="r_a9db87e800d9daff345b46eb0b184b8f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9db87e800d9daff345b46eb0b184b8f7">trap_handler_ecall</a> (void)</td></tr>
<tr class="separator:a9db87e800d9daff345b46eb0b184b8f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a144c9a97815e4b794fd4352aedd33695" id="r_a144c9a97815e4b794fd4352aedd33695"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a144c9a97815e4b794fd4352aedd33695">app_main</a> (void)</td></tr>
<tr class="separator:a144c9a97815e4b794fd4352aedd33695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe" id="r_a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a536d6852ad1a39f0d72310a6145ab6e6" id="r_a536d6852ad1a39f0d72310a6145ab6e6"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a536d6852ad1a39f0d72310a6145ab6e6">core1_stack</a> [2048]</td></tr>
<tr class="separator:a536d6852ad1a39f0d72310a6145ab6e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SMP dual-core program to show how to use the RTE on two cores. This example runs the same code on both cores and triggers the timer and software interrupts to showcase dual-core trap handling using the NEORV32 runtime environment (RTE). </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad4455691936f92fdd6c37566fc58ba1f" name="ad4455691936f92fdd6c37566fc58ba1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4455691936f92fdd6c37566fc58ba1f">&#9670;&#160;</a></span>BAUD_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAUD_RATE&#160;&#160;&#160;19200</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>User configuration </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a144c9a97815e4b794fd4352aedd33695" name="a144c9a97815e4b794fd4352aedd33695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a144c9a97815e4b794fd4352aedd33695">&#9670;&#160;</a></span>app_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int app_main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Application code" executed by BOTH cores.</p>
<dl class="section return"><dt>Returns</dt><dd>Irrelevant (but can be inspected by the debugger). </dd></dl>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe" name="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main function for core 0 (primary core).</p>
<dl class="section warning"><dt>Warning</dt><dd>This program requires the dual-core configuration, the CLINT, UART0 and the A/Zaamo ISA extension.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Irrelevant (but can be inspected by the debugger). </dd></dl>

</div>
</div>
<a id="a9db87e800d9daff345b46eb0b184b8f7" name="a9db87e800d9daff345b46eb0b184b8f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9db87e800d9daff345b46eb0b184b8f7">&#9670;&#160;</a></span>trap_handler_ecall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_handler_ecall </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Machine environment call trap handler for BOTH cores. </p>

</div>
</div>
<a id="a0c6d41971ccbb69a9aee65e04d888477" name="a0c6d41971ccbb69a9aee65e04d888477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c6d41971ccbb69a9aee65e04d888477">&#9670;&#160;</a></span>trap_handler_mswi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_handler_mswi </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Machine software (CLINT) interrupt handler for BOTH cores. </p>

</div>
</div>
<a id="afe6cfafd50efbb383d651961fe231d52" name="afe6cfafd50efbb383d651961fe231d52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe6cfafd50efbb383d651961fe231d52">&#9670;&#160;</a></span>trap_handler_mtmi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_handler_mtmi </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Machine timer (CLINT) interrupt handler for BOTH cores. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a536d6852ad1a39f0d72310a6145ab6e6" name="a536d6852ad1a39f0d72310a6145ab6e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a536d6852ad1a39f0d72310a6145ab6e6">&#9670;&#160;</a></span>core1_stack</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t core1_stack[2048]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Global variables </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
